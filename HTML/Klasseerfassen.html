<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Klassenerfassen</title>
    <link rel="stylesheet" href="../css/test.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/normalize.css">
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
    <script src="../js/javaScripten.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-3-typeahead/4.0.2/bootstrap3-typeahead.min.js"></script>



    <script>
        function displayResult()
        {
            var table=document.getElementById("myTable");



            //var n = countrows.toString();
            var row = table.insertRow(-1);
            var countrows = document.getElementById('myTable').rows.length;
            var cell1=row.insertCell(0);
            var cell2=row.insertCell(1);
            var cell3=row.insertCell(2);
            var cell4=row.insertCell(3);
            cell1.innerHTML= countrows;
            cell2.innerHTML="<input type=\"text\" name=\"Nachname\" class=\"form-control\"    placeholder=\"Nachname\">";
            cell3.innerHTML="<input type=\"text\" name=\"Vorname\" class=\"form-control\"    placeholder=\"Vorname\">";
            cell4.innerHTML="<input type=\"email\" name=\"email\" class=\"form-control\"    placeholder=\"email\">";


        }
    </script>


    <script>
        function wegMitDerReihe()
        {
            var table=document.getElementById("myTable");
            var row = table.deleteRow(-1);

        }
    </script>




</head>
<body>
<header>
    <div class="HeaderBenedictSeite">
        <nav class="nav">
            <a class="nav-link Schrift"  href="benedictSeite.php">Home</a>

            <a class="nav-link activ Schrift" href="Formularabsenden.php">Formular absenden</a>
            <a class="nav-link Schrift" href="Klasseerfassen.html">Klasse erfassen</a>

        </nav>
    </div>
</header>
<section>



    <form class="KlasseErfassen" action="Klasseneuerfassen.php" method="post">
        <div class="form-group">
            <label for="klassenName1">Klassen name</label>
            <input type="text" class="form-control" id="klassenName1" name="KlassenNAmen" aria-describedby="emailHelp" placeholder="Klassen Name">

        </div>
<!--
       <table class="table table-striped"  >
            <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Nachname</th>
                <th scope="col">Vorname</th>
                <th scope="col">Email</th>
            </tr>
            </thead>
            <tbody  id="myTable" name="DasTabelle">
           <!-- <tr>
                <td>1</td>
                <td><input type="text" name="Nachname" class="form-control" placeholder="Nachname" ></td>
                <td><input type="text" name="Vorname" class="form-control" placeholder="Vorname"></td>
                <td><input type="email" name="email" class="form-control" placeholder="email"></td>
            </tr>-->

           <!-- </tbody>
        </table>-->



       <!-- <button type="button"  class="btn btn-primary" onclick="displayResult()">Neue Reihe</button>
        <button type="button"  class="btn btn-primary" onclick="wegMitDerReihe()">Letzte reihe entfernen</button>
        <button type="submit" class="btn btn-primary" >Klasse erstellen</button>
    <!--</form>-->
<!--</section>
</body>-->



<div class="Umpalumpa">
        <table class="table table-bordered" id="crud_table">
            <tr>
                <th scope="col">#</th>
                <th scope="col">Nachname</th>
                <th scope="col">Vorname</th>
                <th scope="col">Email</th>
            </tr>
            <tr>
                <td contenteditable="true">1</td>
                <td><input type="text" name="item_nname" contenteditable="true" class="form-control item_nname" placeholder="Nachname" ></td>
                <td><input type="text" name="item_vname" contenteditable="true"  class="form-control item_vname" placeholder="Vorname"></td>
                <td><input type="email" name="item_email" contenteditable="true" class="form-control item_email" placeholder="email"></td>
                <td></td>
            </tr>
        </table>
        <div align="right">
            <button type="button" name="add" id="add" class="btn btn-success btn-xs">+</button>
        </div>
        <div align="center">
            <button type="button" name="save" id="save" class="btn btn-info">Save</button>
        </div>
      <button type="submit" class="btn btn-primary" >Klasse erstellen</button>
        <br />
        <div id="inserted_item_data"></div>

</div>



    </form>
</section>
<script>
    $(document).ready(function(){
        var count = 1;
        $('#add').click(function(){
            count = count + 1;
            var html_code = "<tr id='row"+count+"'>";
            html_code += "<td contenteditable='true' ></td>";/*"<td><input type=\"text\" name=\"Nachname1\" class=\"form-control\" placeholder=\"Nachname\" ></td>"/*"<td contenteditable='true' class='item_name'></td>";*/
            html_code += "<td><input type=\"text\" name=\"item_nname\" contenteditable=\"true\" class=\"form-control item_nname\" placeholder=\"Nachname\" ></td>"/*"<td contenteditable='true' class='item_code'></td>";*/
            html_code += "<td><input type=\"text\" name=\"item_vname\" contenteditable=\"true\"  class=\"form-control item_vname\" placeholder=\"Vorname\"></td>"/*"<td contenteditable='true' class='item_desc'></td>";*/
            html_code += "<td><input type=\"email\" name=\"item_email\" contenteditable=\"true\" class=\"form-control item_email\" placeholder=\"email\"></td>"/*"<td contenteditable='true'  ></td>";/*"<td contenteditable='true' class='item_price' ></td>";*/
            html_code += "<td><button type='button' name='remove' data-row='row"+count+"' class='btn btn-danger btn-xs remove'>-</button></td>";
            html_code += "</tr>";
            $('#crud_table').append(html_code);
        });

        $(document).on('click', '.remove', function(){
            var delete_row = $(this).data("row");
            $('#' + delete_row).remove();
        });

        $('#save').click(function(){
            var item_nname = [];
            var item_vname = [];
            var item_email = [];

            $('.item_nname').each(function(){
                item_nname.push($(this).text());
            });
            $('.item_vname').each(function(){
                item_vname.push($(this).text());
            });
            $('.item_email').each(function(){
                item_email.push($(this).text());
            });


        });

        $.ajax({
            url:"Klasseneuerfassen.php",
            method:"POST",
            data:{item_nname:item_nname, item_vname:item_vname, item_email:item_email},
            success:function(data){
                alert(data);
                $("td[contentEditable='true']").text("");
                for(var i=2; i<= count; i++)
                {
                    $('tr#'+i+'').remove();
                }
                fetch_item_data();
            }
        });

       /* function fetch_item_data()
        {
            $.ajax({
                url:"fetch.php",
                method:"POST",
                success:function(data)
                {
                    $('#inserted_item_data').html(data);
                }
            })
        }
        fetch_item_data();
*/

    });
</script>






</body>
</html>
